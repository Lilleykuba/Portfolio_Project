"use strict";Object.defineProperty(exports, "__esModule", {value: true});var _chunk4DJVROEEjs = require('./chunk-4DJVROEE.js');function d(r,i){let t=new Headers(i==null?void 0:i.headers);return t.has("content-type")||t.set("content-type","application/json"),new Response(JSON.stringify(r),_chunk4DJVROEEjs.b.call(void 0, _chunk4DJVROEEjs.a.call(void 0, {},i),{headers:t}))}var c=r=>r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),y= exports.generateSitemap =(r,i,t,l)=>{let a=Object.keys(t).reduce((s,e)=>(!e.includes("[")&&r[e]!==!1&&Object.assign(s,{[e]:{path:e,priority:e==="/"?"1.0":"0.7"}}),s),{});return Object.entries(t).forEach(([s])=>{let e=r[s];e&&(Array.isArray(e)?e.forEach(o=>{o&&Object.assign(a,{[o.path]:o})}):Object.assign(a,{[(e==null?void 0:e.path)||s]:e}))}),l===!0?Object.entries(a):`<?xml version="1.0" encoding="UTF-8"?>
<urlset
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd"
xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"
xmlns:image="http://www.google.com/schemas/sitemap-image/1.1"
xmlns:video="http://www.google.com/schemas/sitemap-video/1.1"
xmlns:news="http://www.google.com/schemas/sitemap-news/0.9"
xmlns:mobile="http://www.google.com/schemas/sitemap-mobile/1.0"
xmlns:pagemap="http://www.google.com/schemas/sitemap-pagemap/1.0"
xmlns:xhtml="http://www.w3.org/1999/xhtml">
${Object.entries(a).map(([s,e])=>{var h,f;if(!e)return"";let{path:o,priority:n,changeFreq:g,image:m,lastMod:w}=e;return`  <url>
    <loc>${i}${o||s}</loc>
  </url>
  ${w?`<lastmod>${w}</lastmod>`:""}
  ${n?`<priority>${n}</priority>`:""}
  ${g?`<changefreq>${g}</changefreq>`:""}
  ${m?`
    <image:image>
      <image:loc>${c(m.url)}</image:loc>
      <image:title>${c((h=m.title)!=null?h:" ")}</image:title>
      <image:caption>${c((f=m.altText)!=null?f:" ")}</image:caption>
    </image:image>`:""}`}).join(`
`)}
</urlset>`},S= exports.generateRobots =(r,i)=>{let t=[],l=a=>{let s=Object.entries(a.paths).reduce((e,[o,n])=>(n?e.allow.push(o):e.disallow.push(o),e),{allow:[],disallow:[]});Array.isArray(a.userAgent)?a.userAgent.forEach(e=>{t.push(_chunk4DJVROEEjs.a.call(void 0, {agent:e,crawlDelay:a.crawlDelay},s))}):t.push(_chunk4DJVROEEjs.a.call(void 0, {agent:a.userAgent||"*",crawlDelay:a.crawlDelay},s))};return typeof r=="boolean"?t.push({agent:"*",allow:r===!0?["/"]:[],disallow:r===!1?["/"]:[]}):Array.isArray(r)?r.forEach(l):l(r),`${t.map(({agent:a,crawlDelay:s,allow:e,disallow:o})=>`User-agent: ${a}
Sitemap: ${i}/sitemap.xml
${s?`Crawl-delay: ${s}`:""}
${e.map(n=>`Allow: ${n}`).join(`
`)}
${o.map(n=>`Disallow: ${n}`).join(`
`)}
`.replace(/\n\n/g,`
`).replace(/\n\n/g,`
`)).join(`
`)}
`.trim()};var v=(r,i={})=>a=>_chunk4DJVROEEjs.c.call(void 0, void 0,[a],function*({event:t,resolve:l}){if(t.url.pathname==="/sitemap.xml"){let s=i.getRoutes?yield i.getRoutes(t):{},e=t.url.searchParams.get("format")==="json",o=y(s,t.url.origin,r,e);return e?d(o):new Response(o,{status:200,headers:{"Content-Type":"application/xml"}})}if(t.url.pathname==="/robots.txt"){let s=i.getRobots?yield i.getRobots(t):!0;return new Response(S(s,t.url.origin),{headers:{"content-type":"text/plain","cache-control":`max-age=${60*60*24}`}})}return l(t)});exports.encodeXML = c; exports.generateRobots = S; exports.generateSitemap = y; exports.sitemapHook = v;
//# sourceMappingURL=index.js.map